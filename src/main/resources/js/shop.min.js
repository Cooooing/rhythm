var Shop={init:function(){Shop.log("Client","正在连接服务器，请稍等..."),Shop.resetInput(),$("body").on("keypress",function(n){13===n.keyCode&&setTimeout(function(){Shop.resetInput()},100)}),$(".subInput").on("click",function(){setTimeout(function(){console.log("Reset cursor"),$(".i-cmd").focus()},100)})},log:function(n,s){void 0===n&&(n="N/A");let e=new Date;n="["+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"&nbsp;"+n+"]&nbsp;",$(".logs").append("\n<div class='subLog'>"+n+s+"</div>")},resetInput:function(n,s){void 0===s&&(s=""),void 0===n&&(n="~"),$(".input").html("<div class='subInput'><span class='i-name'>"+Label.currentUserName+"</span><span class='i-at'>@</span><span class='i-host'>"+Label.servePath.replace("http://","").replace("https://","")+"</span><span class='i-colon'>:</span><span class='i-location'>"+n+"</span><span class='i-user-as'>$</span><span class='i-space'>&nbsp;</span><span class='i-cmd' contenteditable='true'>"+s+"</span></div>"),$(".i-cmd").focus()}},ShopChannel={ws:void 0,init:function(n){ShopChannel.ws=new WebSocket(n),ShopChannel.ws.onopen=function(){Shop.log("Client","连接成功，已启动命令通道。"),setInterval(function(){ShopChannel.ws.send("-hb-")},55e3)},ShopChannel.ws.onmessage=function(n){n=JSON.parse(n.data);Shop.log("Server",n.message)},ShopChannel.ws.onclose=function(){Shop.log("Client","与服务端的连接已断开，正在尝试重连..."),setInterval(function(){$.ajax({url:"/",method:"get",success:function(){location.reload()}})},5e3)},ShopChannel.ws.onerror=function(n){Shop.log("Client","连接出错，正在尝试重连..."),setInterval(function(){$.ajax({url:"/",method:"get",success:function(){location.reload()}})},5e3)}}};